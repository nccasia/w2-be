//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table Organization {
  id Int [pk, increment]
  name String [not null]
  description String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  tasks Task [not null]
  users User [not null]
  teams Team [not null]
  settings Settings [not null]
  files File [not null]
  eventLogs EventLog [not null]
  taskDefinitions TaskDefinition [not null]
  permissionGroups PermissionGroup [not null]
  permissions Permission [not null]
  resources Resource [not null]
}

Table Resource {
  id Int [pk, increment]
  name String [not null]
  description String [not null]
  code String [not null]
  icon String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  organization Organization [not null]
  organizationId Int [not null]
  resourceItems ResourceItem [not null]
}

Table ResourceItem {
  id Int [pk, increment]
  name String [not null]
  code String [not null]
  description String [not null]
  icon String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  resource Resource [not null]
  resourceId Int [not null]
}

Table File {
  id Int [pk, increment]
  filename String [not null]
  fileType FileType [not null]
  mimetype String [not null]
  encoding String [not null]
  data String [not null]
  cdnUrl String [not null]
  varantName String
  variantKey String
  variantValue String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  variantOfId Int
  variantOf File
  variants File [not null]
  organizationId Int [not null]
  organization Organization [not null]
  avatarUsers User [not null]
}

Table Settings {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  key String [not null]
  value Json [not null, default: '{}']
  organization Organization [not null]
  organizationId Int [not null]
}

Table User {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  email String [unique, not null]
  password String [not null]
  firstname String
  lastname String
  avatarId Int
  avatar File
  organizationId Int [not null]
  organization Organization [not null]
  managedteams Team [not null]
  createdteams Team [not null]
  createdTasks Task [not null]
  assignedTasks Task [not null]
  memberOnTeams MemberOnTeams [not null]
  posts Post [not null]
  comments Comment [not null]
  taskEvents EventLog [not null]
  role Role [not null]
  userPermissions UserPermission [not null]
}

Table Form {
  id Int [pk, increment]
  name String [not null]
  code String [not null]
  description String [not null]
  schema Json [not null]
  config Json [not null]
  validationConfig Json [not null]
  triggerConfig Json [not null]
  serializerConfig Json [not null]
  displayTemplate String [not null]
  displayConfig Json [not null]
  taskDefinitions TaskDefinition [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
}

Table Permission {
  id Int [pk, increment]
  name String [not null]
  code String [not null]
  description String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  organization Organization [not null]
  organizationId Int [not null]
  permissionGroup PermissionGroup [not null]
  permissionGroupId Int [not null]
  userPermissions UserPermission [not null]
}

Table PermissionGroup {
  id Int [pk, increment]
  name String [not null]
  description String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  organization Organization [not null]
  organizationId Int [not null]
  permissions Permission [not null]
}

Table UserPermission {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  user User [not null]
  userId Int [not null]
  permission Permission [not null]
  permissionId Int [not null]
}

Table Post {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  published Boolean [not null]
  title String [not null]
  content String
  author User
  authorId Int
}

Table Team {
  id Int [pk, increment]
  name String [not null]
  bio String [not null]
  description String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  creatorId Int [not null]
  creator User [not null]
  managerId Int [not null]
  manager User [not null]
  organizationId Int [not null]
  organization Organization [not null]
  memberOnTeams MemberOnTeams [not null]
  tasks Task [not null]
}

Table MemberOnTeams {
  team Team [not null]
  teamId Int [not null]
  user User [not null]
  userId Int [not null]
  assignedAt DateTime [default: `now()`, not null]
  assignedBy String [not null]

  indexes {
    (teamId, userId) [pk]
  }
}

Table TaskDefinition {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  keyTemplate String [not null, default: 'task-{{id}}']
  title String [not null]
  description String [not null]
  icon String [not null]
  thumbnail String [not null]
  formId Int
  form Form
  descriptionTemplate String
  titleTemplate String
  statusTemplate String
  stateTemplate String
  notificationTemplate String
  ctaTemplate String
  stateConfig Json
  statusConfig Json
  notificationConfig Json
  processConfig Json
  triggerConfig Json
  ctaConfig Json
  config Json
  taskInstances Task [not null]
  organization Organization [not null]
  organizationId Int [not null]
  parentId Int
  parentTaskDefinition TaskDefinition
  subTaskDefinitions TaskDefinition [not null]
  taskDefinitionActivityDefinitions TaskDefinitionActivityDefinition [not null]
}

Table TaskDefinitionActivityDefinition {
  id Int [pk, increment]
  taskDefinitionId Int [not null]
  taskDefinition TaskDefinition [not null]
  activityDefinitionId Int [not null]
  activityDefinition ActivityDefinition [not null]
  config Json
  initialValue Json
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
}

Table Task {
  id Int [pk, increment]
  title String [not null]
  description String [not null]
  dueDate DateTime
  priority TaskPriority [not null, default: 'LOW']
  isActve Boolean [not null, default: false]
  key String [not null]
  properties Json
  values Json
  type String [not null, default: '']
  typeName String [not null, default: '']
  cta String [not null, default: '']
  ctaName String [not null, default: '']
  state String [not null, default: '']
  stateName String [not null, default: '']
  status String [not null, default: '']
  statusName String [not null, default: '']
  stateValues String [not null, default: '']
  descriptionTemplate String
  titleTemplate String
  statusTemplate String
  stateTemplate String
  notificationTemplate String
  ctaTemplate String
  stateConfig Json
  statusConfig Json
  notificationConfig Json
  processConfig Json
  triggerConfig Json
  ctaConfig Json
  formConfig Json
  config Json
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  definitionId Int [not null]
  definition TaskDefinition [not null]
  comments Comment [not null]
  eventLogs EventLog [not null]
  assigneeId Int
  assignee User
  creatorId Int [not null]
  creator User [not null]
  parentId Int
  parentTask Task
  subTasks Task [not null]
  organizationId Int [not null]
  organization Organization [not null]
  teamId Int
  team Team
  Trigger Trigger [not null]
}

Table Comment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  content String [not null]
  creatorId Int [not null]
  creator User [not null]
  taskId Int [not null]
  task Task [not null]
}

Table EventLog {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  userId Int
  user User
  taskId Int
  task Task
  actionId Int [not null]
  Action Action
  organizationId Int [not null]
  organization Organization [not null]
}

Table Action {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  type ActionType [not null]
  events EventLog [not null]
  action String [not null]
  intent String [not null]
  domain String [not null]
  content String [not null]
}

Table Trigger {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  type TriggerType [not null]
  status TriggerStatus [not null]
  key String [not null]
  value Json
  name String
  description String
  taskId Int
  task Task
}

Table ActivityDefinition {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  synchronous Boolean [not null, default: false]
  type ActivityType [not null]
  config Json
  initialValue Json
  key String [unique, not null]
  name String
  description String
  taskDefinitionActivityDefinitions TaskDefinitionActivityDefinition [not null]
}

Enum FileType {
  FILE
  VARIANT
}

Enum Role {
  ADMIN
  USER
}

Enum TaskPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

Enum ActionType {
  CREATE_TASK
  UPDATE_TASK
  DELETE_TASK
  CREATE_COMMENT
  UPDATE_STATUS
  ASSIGN_USER
  SUMBIT_FORM
}

Enum TriggerType {
  FORM_TRIGGER
  SYSTEM_TRIGGER
  MANUAL_TRIGGER
  WEBHOOK_TRIGGER
}

Enum TriggerStatus {
  NEW
  PROCESSING
  PROCESSED
  FAILED
}

Enum ActivityType {
  HTTP_ACTIVITY
  GRAPHQL_ACTIVITY
  SCRIPT_ACTIVITY
  SYSTEM_ACTIVITY
}

Ref: Resource.organizationId > Organization.id

Ref: ResourceItem.resourceId > Resource.id

Ref: File.variantOfId - File.id

Ref: File.organizationId > Organization.id

Ref: Settings.organizationId > Organization.id

Ref: User.avatarId > File.id

Ref: User.organizationId > Organization.id

Ref: Permission.organizationId > Organization.id

Ref: Permission.permissionGroupId > PermissionGroup.id

Ref: PermissionGroup.organizationId > Organization.id

Ref: UserPermission.userId > User.id

Ref: UserPermission.permissionId > Permission.id

Ref: Post.authorId > User.id

Ref: Team.creatorId > User.id

Ref: Team.managerId > User.id

Ref: Team.organizationId > Organization.id

Ref: MemberOnTeams.teamId > Team.id

Ref: MemberOnTeams.userId > User.id

Ref: TaskDefinition.formId > Form.id

Ref: TaskDefinition.organizationId > Organization.id

Ref: TaskDefinition.parentId - TaskDefinition.id

Ref: TaskDefinitionActivityDefinition.taskDefinitionId > TaskDefinition.id

Ref: TaskDefinitionActivityDefinition.activityDefinitionId > ActivityDefinition.id

Ref: Task.definitionId > TaskDefinition.id

Ref: Task.assigneeId > User.id

Ref: Task.creatorId > User.id

Ref: Task.parentId - Task.id

Ref: Task.organizationId > Organization.id

Ref: Task.teamId > Team.id

Ref: Comment.creatorId > User.id

Ref: Comment.taskId > Task.id

Ref: EventLog.userId > User.id

Ref: EventLog.taskId > Task.id

Ref: EventLog.actionId > Action.id

Ref: EventLog.organizationId > Organization.id

Ref: Trigger.taskId > Task.id